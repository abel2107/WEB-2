<!DOCTYPE html>
<html>
<head>
  <title>Movie Recap Generator</title>
</head>
<body>
  <h1>Movie Recap Generator</h1>
  <input type="text" id="movieTitle" placeholder="Enter movie title" />
  <button onclick="generateRecap()">Get Recap</button>
  <pre id="output"></pre>

  <script>
    async function generateRecap() {
      const movieTitle = document.getElementById('movieTitle').value;
      const output = document.getElementById('output');

      output.textContent = "Generating recap...";

      const apiKey = "YOUR_OPENAI_API_KEY"; // Warning: Don't use this way in production

      if (!apiKey || apiKey === "YOUR_OPENAI_API_KEY") {
        output.textContent = "Please provide a valid OpenAI API key.";
        return;
      }

      try {
        const response = await fetch("https://api.openai.com/v1/chat/completions", {
          method: "POST",
          headers: {
            "Authorization": `Bearer ${apiKey}`,
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            model: "gpt-4",
            messages: [
              { role: "system", content: "You are a helpful assistant that gives clear and complete movie recaps." },
              { role: "user", content: `Give me a detailed recap of the movie titled "${movieTitle}".` }
            ],
            temperature: 0.7,
            max_tokens: 500
          })
        });

        if (!response.ok) {
          throw new Error(`API error: ${response.status}`);
        }

        const data = await response.json();
        output.textContent = data.choices?.[0]?.message?.content || "Something went wrong.";
      } catch (error) {
        output.textContent = "Error: " + error.message;
      }
    }
  </script>
</body>
</html>